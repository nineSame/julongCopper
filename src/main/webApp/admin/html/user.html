<!DOCTYPE html>
<head>
    <title>后台管理-西藏巨龙铜业有限公司</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content=""/>
    <link rel="icon" href="../images/favicon.ico">
    <!-- bootstrap-css -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/bootstrap-datetimepicker.min.css">
    <!-- Custom CSS -->
    <link href="../assets/css/style.css" rel='stylesheet' type='text/css'/>
    <link href="../assets/css/style-responsive.css" rel="stylesheet"/>
    <!-- font-awesome icons -->
    <link rel="stylesheet" href="../assets/css/font.css" type="text/css"/>
    <link href="../assets/css/font-awesome.css" rel="stylesheet">
    <!-- self -->
    <link rel="stylesheet" href="../css/common.css?v=1.0">
    <link rel="stylesheet" href="../css/sjtj.css?v=1.0">
</head>
<body style="background:#f9f9f9;" onload="getData()">
<section id="container">
    <!--顶部-->
    <header class="header fixed-top clearfix" id="commonHeader"></header>
    <!--左边菜单-->
    <aside>
        <div id="sidebar" class="nav-collapse">
            <div class="leftside-navigation">
                <ul class="sidebar-menu" id="nav-accordion"></ul>
            </div>
        </div>
    </aside>
    <!--右边内容-->
    <section id="main-content">
        <section class="wrapper" id="wrapper">
            <h3 class="main-title" id="mainTitle">人员管理</h3>
            <div>
                <div class="col-sm-5 m-b-xs">
                    <button  class="btn btn-sm btn-primary" id="addDataBtn">
                        添加人员
                    </button>
                </div>
                <div class="col-sm-4 text-left">

                </div>
                <div class="col-sm-3">
                </div>
                <table class="table table-striped table-hover table-condensed">
                    <thead>
                    <tr>
                        <th>用户名</th>
                        <th>姓名</th>
                        <th>性别</th>
                        <th>职务</th>
                        <th>操作</th>
                    </thead>
                    <tbody>
                    <tr>
                        <td>admin</td>
                        <td>管理员</td>
                        <td>男</td>
                        <td>系统管理员</td>
                        <td>
                            <button class="btn btn-primary btn-xs edit">编辑</button>
                            <button class="btn btn-danger btn-xs del">删除</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-sm-5 text-center">
                        <small class="text-muted inline m-t-sm m-b-sm">
                            显示 1 到 10 条数据，总共 31 条。
                        </small>
                    </div>
                    <div class="col-sm-7 text-right text-center-xs">
                        <ul class="pagination pagination-sm m-t-none m-b-none">
                            <li><a href=""><i class="fa fa-chevron-left"></i></a></li>
                            <li><a href="">1</a></li>
                            <li><a href="">2</a></li>
                            <li><a href="">3</a></li>
                            <li><a href="">4</a></li>
                            <li><a href=""><i class="fa fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </footer>
        </section>
    </section>
</section>

<!-- 用户模态框 -->
<div class="modal fade bs-example-modal-lg" id="dataModal" tabindex="-1" role="dialog"
     aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document" style="width: 600px;">
        <form class="modal-content" id="dataForm">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="modalTitle">用户信息</h4>
            </div>
            <div class="modal-body">
                <div  class="form-horizontal">
                    <div class="form-group clearfix modal-form">
                        <div class="form-item1 pull-left">
                            <span class="pre">用户名</span>
                            <input type="text" style="width:416px;" name="username" id="username">
                        </div>
                        <div class="form-item1 pull-left">
                            <span class="pre">姓名</span>
                            <input type="text" style="width:160px;" name="name" id="name">
                        </div>
                        <div class="form-item1 pull-left">
                            <span class="pre">性别</span>
                            <input type="text" style="width:160px;" name="sex" id="sex">
                        </div>
                        <div class="form-item1 pull-left">
                            <span class="pre">职务</span>
                            <input type="text" style="width:416px;">
                        </div>
                        <div class="form-item1 pull-left">
                            <span class="pre">照片</span>
                            <input type="file" style="width:416px;display: inline" name="zpfile" id="zpfile">
                        </div>
                        <div class="form-item1 pull-left">
                            <span class="pre">人员描述</span>
                            <textarea type="text" style="width:416px;height:60px;resize: none;" name="ryms" id="ryms"></textarea>
                        </div>
                    </div>
                </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="saveDataBtn">保存</button>
            </div>
        </div>
    </form>
</div>
</div>
<div id="footer"></div>
</body>
<script src="../assets/bootstrap/jquery2.0.3.min.js"></script>
<script src="../js/config.js?v=1.0"></script>
<script src="../js/function.js?v=1.0"></script>
<script src="../js/common.js?v=1.0"></script>
<script src="../assets/bootstrap/bootstrap.js"></script>
<script src="../assets/bootstrap/bootstrap-datetimepicker.js"></script>
<script src="../assets/bootstrap/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../assets/bootstrap/jquery.dcjqaccordion.2.7.js"></script>
<script src="../assets/bootstrap/jquery.scrollTo.js"></script>
<script src="../assets/bootstrap/scripts.js"></script>
<script src="../assets/bootstrap/jquery.slimscroll.js"></script>
<script src="../assets/bootstrap/jquery.nicescroll.js"></script>
<script src="../assets/bootstrap/raphael-min.js"></script>
<script src="../assets/bootstrap/morris.js"></script>
<script>
    $(function(){
        getData();//获取数据
        operateData();//操作数据

    });
    function operateData() {
        $('#addDataBtn').off('click').on('click',function () {
            $('#dataModal').modal('show');
        });
        $('#saveDataBtn').off('click').on('click',function () {
            var formData = new FormData($("#dataForm")[0]);
            $.ajax({
                cache: false,
                contentType: false,
                processData: false,
                url: '/create',
                type: 'post',
                data: formData,
                dataType: 'json',
                success: function (json) {
                    console.log(json);
                    $('#dataModal').modal('hide');
                },
                error: function () {
                    alert(json.data);
                }
            });

        });
    }


    function getData() {
        $.ajax({
            cache: false,
            contentType: false,
            processData: false,
            url: '/display',
            type: 'post',
            dataType: 'rows',
            success: function (rows) {
                console.log(rows);
                $('#dataModal').modal('hide');
            },
            error: function () {
                alert("err");
            }
        });
    }
</script>
</html>
